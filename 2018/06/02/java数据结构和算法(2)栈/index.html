<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="鄢玉兵的博客" type="application/atom+xml" />






<meta name="description" content="一：栈1：栈的应用场景1：子程序的调用 2：处理递归调用 3：表达式的转换 4：二叉树的遍历 5：图形的深度优先搜索法 2：用数组模拟栈，代码实现出栈与入栈思路1：需要栈的大小 2：需要定义栈顶top,初始化为-1 3：入栈，当有数据加入栈pop()，top++，加入数据 4：出栈，当有数据取出时push()，top–，取出数据 5：注意：出栈之后数组的元素并没有改变 12345678910111">
<meta property="og:type" content="article">
<meta property="og:title" content="java数据结构和算法(2)栈">
<meta property="og:url" content="https:&#x2F;&#x2F;yanyubing.xyz&#x2F;2018&#x2F;06&#x2F;02&#x2F;java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95(2)%E6%A0%88&#x2F;index.html">
<meta property="og:site_name" content="鄢玉兵的博客">
<meta property="og:description" content="一：栈1：栈的应用场景1：子程序的调用 2：处理递归调用 3：表达式的转换 4：二叉树的遍历 5：图形的深度优先搜索法 2：用数组模拟栈，代码实现出栈与入栈思路1：需要栈的大小 2：需要定义栈顶top,初始化为-1 3：入栈，当有数据加入栈pop()，top++，加入数据 4：出栈，当有数据取出时push()，top–，取出数据 5：注意：出栈之后数组的元素并没有改变 12345678910111">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-12-01T15:07:43.839Z">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://yanyubing.xyz/2018/06/02/java数据结构和算法(2)栈/"/>





  <title>java数据结构和算法(2)栈 | 鄢玉兵的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
<a href="https://yanyubing.xyz"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_left_red_aa0000.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">鄢玉兵的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yanyubing.xyz/2018/06/02/java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95(2)%E6%A0%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="鄢玉兵">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢玉兵的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">java数据结构和算法(2)栈</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-02T20:46:12+08:00">
                2018-06-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="一：栈"><a href="#一：栈" class="headerlink" title="一：栈"></a>一：栈</h1><h3 id="1：栈的应用场景"><a href="#1：栈的应用场景" class="headerlink" title="1：栈的应用场景"></a>1：栈的应用场景</h3><p>1：子程序的调用</p>
<p>2：处理递归调用</p>
<p>3：表达式的转换</p>
<p>4：二叉树的遍历</p>
<p>5：图形的深度优先搜索法</p>
<h3 id="2：用数组模拟栈，代码实现出栈与入栈思路"><a href="#2：用数组模拟栈，代码实现出栈与入栈思路" class="headerlink" title="2：用数组模拟栈，代码实现出栈与入栈思路"></a>2：用数组模拟栈，代码实现出栈与入栈思路</h3><p>1：需要栈的大小</p>
<p>2：需要定义栈顶top,初始化为-1</p>
<p>3：入栈，当有数据加入栈pop()，top++，加入数据</p>
<p>4：出栈，当有数据取出时push()，top–，取出数据</p>
<p>5：注意：出栈之后数组的元素并没有改变</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">package com.it.stack;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public class ArrayStackDemo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //测试ArrayStack</span><br><span class="line">        ArrayStack stack = new ArrayStack(4);</span><br><span class="line">        String key = &quot;&quot;;//控制输入字符</span><br><span class="line">        boolean loop = true;//控制退出菜单</span><br><span class="line">        Scanner scanner = new Scanner(System.in);</span><br><span class="line">        while (loop) &#123;</span><br><span class="line">            System.out.println(&quot;----------------&quot;);</span><br><span class="line">            System.out.println(&quot;show:表示显示栈&quot;);</span><br><span class="line">            System.out.println(&quot;exit:退出程序&quot;);</span><br><span class="line">            System.out.println(&quot;push:表示添加数据到栈&quot;);</span><br><span class="line">            System.out.println(&quot;pop:表示从栈取出数据&quot;);</span><br><span class="line">            System.out.println(&quot;请输入你的选择&quot;);</span><br><span class="line">            key = scanner.next();</span><br><span class="line">            switch (key) &#123;</span><br><span class="line">                case &quot;show&quot;:</span><br><span class="line">                    stack.list();</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;push&quot;:</span><br><span class="line">                    System.out.println(&quot;请输入要加入的数&quot;);</span><br><span class="line">                    int value = scanner.nextInt();</span><br><span class="line">                    stack.push(value);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;pop&quot;:</span><br><span class="line">                    try &#123;</span><br><span class="line">                        int pop = stack.pop();</span><br><span class="line">                        System.out.printf(&quot;出栈的数据是%d\n&quot;, pop);</span><br><span class="line">                    &#125; catch (Exception e) &#123;</span><br><span class="line">                        System.out.println(e.getMessage());</span><br><span class="line">                    &#125;</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;exit&quot;:</span><br><span class="line">                    scanner.close();</span><br><span class="line">                    loop = false;</span><br><span class="line">                    break;</span><br><span class="line">                default:</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;程序退出！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//定义一个类表示栈结构</span><br><span class="line">class ArrayStack &#123;</span><br><span class="line">    private int mazSize;//栈的最大大小</span><br><span class="line">    private int[] stack;//数组模拟战，数据放在该数组中</span><br><span class="line">    private int top = -1;//初始化栈顶为-1</span><br><span class="line"></span><br><span class="line">    //构造器</span><br><span class="line">    public ArrayStack(int mazSize) &#123;</span><br><span class="line">        this.mazSize = mazSize;</span><br><span class="line">        //初始化数组</span><br><span class="line">        stack = new int[this.mazSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //栈空</span><br><span class="line">    public boolean isFull() &#123;</span><br><span class="line">        return top == mazSize - 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //栈空</span><br><span class="line">    public boolean isEmpty() &#123;</span><br><span class="line">        return top == -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //入栈</span><br><span class="line">    public void push(int value) &#123;</span><br><span class="line">        //先判断是否满</span><br><span class="line">        if (isFull()) &#123;</span><br><span class="line">            System.out.println(&quot;栈满&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        top++;</span><br><span class="line">        stack[top] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //出栈</span><br><span class="line">    public int pop() &#123;</span><br><span class="line">        if (isEmpty()) &#123;</span><br><span class="line">            throw new RuntimeException(&quot;栈空，没有数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        int value = stack[top];</span><br><span class="line">        top--;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //遍历栈,需要从栈顶开始显示数据</span><br><span class="line">    public void list() &#123;</span><br><span class="line">        if (isEmpty()) &#123;</span><br><span class="line">            System.out.println(&quot;栈空，没有数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = top; i &gt;= 0; i--) &#123;</span><br><span class="line">            System.out.printf(&quot;stack[%d]=%d\n&quot;, i, stack[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3：栈实现综合计算器：中缀表达式"><a href="#3：栈实现综合计算器：中缀表达式" class="headerlink" title="3：栈实现综合计算器：中缀表达式"></a>3：栈实现综合计算器：中缀表达式</h3><p>1：创建一个数栈numStack，存放数</p>
<p>2：创建一个符号栈operStack，存放运算符</p>
<p>3：通过index值（索引），遍历我们的表达式</p>
<p>4：如果我们发现的是一个数字，就直接放入数栈</p>
<p>5：如果扫描的是一个符号</p>
<p>​    1：如果发现目前的符号栈为空，就直接入栈</p>
<p>​    2：如果符号栈有操作符，就进行比较。如果当前的操作符优先级小于或者等于栈中的操作符，就需要从数栈中pop出两个数再从符号栈中pop出一个符号，进行运算，将得到的结构再入数栈，然后再把当前符号入符号栈；如果当前的操作符优先级大于栈中的操作符，就直接入符号栈。</p>
<p>6：当表达式扫描完毕，就顺序的从数栈和符号栈中pop出相应的数和符号，并进行运算，最后在数栈中只有一个数字，就是表达式的结果</p>
<p>7：注意：栈的判断条件，如操作符栈最多只能有两个字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line">package com.it.stack;</span><br><span class="line"></span><br><span class="line">import javax.jws.soap.SOAPMessageHandlers;</span><br><span class="line"></span><br><span class="line">public class Calculator &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //表达式</span><br><span class="line">        String expression = &quot;5+9+297-1&quot;;</span><br><span class="line">        //创建两个栈,这里大小设置为10，实际上应该只能用到2-3左右</span><br><span class="line">        ArrayStack2 numStack = new ArrayStack2(10);</span><br><span class="line">        ArrayStack2 operStack = new ArrayStack2(10);</span><br><span class="line">        //定义相关变量</span><br><span class="line">        int index = 0;//用于扫描</span><br><span class="line">        int num1 = 0;</span><br><span class="line">        int num2 = 0;</span><br><span class="line">        int oper = 0;</span><br><span class="line">        int res = 0;</span><br><span class="line">        char ch = &apos; &apos;;//将每次扫描的char保存到ch</span><br><span class="line">        String keepNum = &quot;&quot;;//用于拼接多位数</span><br><span class="line">        //        开始while循环扫描expression</span><br><span class="line">        while (true) &#123;</span><br><span class="line">            //依次得到expression的每一个字符</span><br><span class="line">            ch = expression.substring(index, index + 1).charAt(0);</span><br><span class="line">            //判断ch，不同处理</span><br><span class="line">            //如果是符号</span><br><span class="line">            if (operStack.isOper(ch)) &#123;</span><br><span class="line">                if (!operStack.isEmpty()) &#123;</span><br><span class="line">                    //满足该条件时运算</span><br><span class="line">                    if (operStack.priority(ch) &lt;= operStack.priority(operStack.peek())) &#123;</span><br><span class="line">                        num1 = numStack.pop();</span><br><span class="line">                        num2 = numStack.pop();</span><br><span class="line">                        oper = operStack.pop();</span><br><span class="line">                        res = numStack.cal(num1, num2, oper);</span><br><span class="line">                        //把运算结果入数栈</span><br><span class="line">                        numStack.push(res);</span><br><span class="line">                        //然后将当前的操作符入符号栈</span><br><span class="line">                        operStack.push(ch);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        //如果当前的操作符的优先级大于栈中的操作符，就直接入符号栈</span><br><span class="line">                        operStack.push(ch);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    //如果为空，直接入符号栈</span><br><span class="line">                    operStack.push(ch);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            //如果是数，则直接入栈，注意此时传入的是字符‘1’；需要对照ascii表转换为数字1， -48</span><br><span class="line">            //注意这里有问题，不能处理多位数</span><br><span class="line">            //需要进行拼接</span><br><span class="line">            else &#123;</span><br><span class="line">                //处理多位数</span><br><span class="line">                keepNum += ch;</span><br><span class="line">                //如果ch已经是expression最后一位，直接入栈</span><br><span class="line">                if (index == expression.length() - 1) &#123;</span><br><span class="line">                    numStack.push(Integer.parseInt(keepNum));</span><br><span class="line">                &#125; else &#123;//判断下一个字符是不是数字，如果是数字，则继续扫描，如果是字符，则入栈</span><br><span class="line">                    if (operStack.isOper(expression.substring(index + 1, index + 2).charAt(0))) &#123;</span><br><span class="line">                        //如果后一位是操作符，则入栈，keepNum=&quot;123&quot;，转为数字</span><br><span class="line">                        numStack.push(Integer.parseInt(keepNum));</span><br><span class="line">                        //重要，情况keepNum</span><br><span class="line">                        keepNum = &quot;&quot;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            //让index+1，并判断是否扫描到expression最后</span><br><span class="line">            index++;</span><br><span class="line">            if (index == expression.length()) &#123;</span><br><span class="line">                //扫描结束</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //开始计算后面的情况</span><br><span class="line">        while (true) &#123;</span><br><span class="line">            //如果符号栈为空，则计算到最后的结果，数栈中只有一个数字【结果】</span><br><span class="line">            if (operStack.isEmpty()) &#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">            num1 = numStack.pop();</span><br><span class="line">            num2 = numStack.pop();</span><br><span class="line">            oper = operStack.pop();</span><br><span class="line">            res = numStack.cal(num1, num2, oper);</span><br><span class="line">            //把运算结果入数栈</span><br><span class="line">            numStack.push(res);</span><br><span class="line">        &#125;</span><br><span class="line">        //将最后的数，pop出就是结果</span><br><span class="line">        int res2 = numStack.pop();</span><br><span class="line">        System.out.printf(&quot;表达式%s=%d&quot;, expression, res2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//定义一个类表示栈结构</span><br><span class="line">class ArrayStack2 &#123;</span><br><span class="line">    private int mazSize;//栈的最大大小</span><br><span class="line">    private int[] stack;//数组模拟战，数据放在该数组中</span><br><span class="line">    private int top = -1;//初始化栈顶为-1</span><br><span class="line"></span><br><span class="line">    //构造器</span><br><span class="line">    public ArrayStack2(int mazSize) &#123;</span><br><span class="line">        this.mazSize = mazSize;</span><br><span class="line">        //初始化数组</span><br><span class="line">        stack = new int[this.mazSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //栈空</span><br><span class="line">    public boolean isFull() &#123;</span><br><span class="line">        return top == mazSize - 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //栈空</span><br><span class="line">    public boolean isEmpty() &#123;</span><br><span class="line">        return top == -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //入栈</span><br><span class="line">    public void push(int value) &#123;</span><br><span class="line">        //先判断是否满</span><br><span class="line">        if (isFull()) &#123;</span><br><span class="line">            System.out.println(&quot;栈满&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        top++;</span><br><span class="line">        stack[top] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //出栈</span><br><span class="line">    public int pop() &#123;</span><br><span class="line">        if (isEmpty()) &#123;</span><br><span class="line">            throw new RuntimeException(&quot;栈空，没有数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        int value = stack[top];</span><br><span class="line">        top--;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //遍历栈,需要从栈顶开始显示数据</span><br><span class="line">    public void list() &#123;</span><br><span class="line">        if (isEmpty()) &#123;</span><br><span class="line">            System.out.println(&quot;栈空，没有数据&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = top; i &gt;= 0; i--) &#123;</span><br><span class="line">            System.out.printf(&quot;stack[%d]=%d\n&quot;, i, stack[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //返回运算符的优先级，优先级使用数字表示，数字越大则优先级越高</span><br><span class="line">    public int priority(int oper) &#123;</span><br><span class="line">        if (oper == &apos;*&apos; || oper == &apos;/&apos;) &#123;</span><br><span class="line">            return 1;</span><br><span class="line">        &#125;</span><br><span class="line">        if (oper == &apos;+&apos; || oper == &apos;-&apos;) &#123;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return -1;//假定目前的表达式只有+，-，*，/</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //判断是不是一个运算符</span><br><span class="line">    public boolean isOper(char val) &#123;</span><br><span class="line">        return val == &apos;+&apos; || val == &apos;-&apos; || val == &apos;*&apos; || val == &apos;/&apos;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //计算方法</span><br><span class="line">    public int cal(int num1, int num2, int oper) &#123;</span><br><span class="line">        int res = 0;//用于存放计算的结果</span><br><span class="line">        switch (oper) &#123;</span><br><span class="line">            case &apos;+&apos;:</span><br><span class="line">                res = num1 + num2;</span><br><span class="line">                break;</span><br><span class="line">            case &apos;-&apos;:</span><br><span class="line">                res = num2 - num1;//注意顺序</span><br><span class="line">                break;</span><br><span class="line">            case &apos;*&apos;:</span><br><span class="line">                res = num1 * num2;</span><br><span class="line">                break;</span><br><span class="line">            case &apos;/&apos;:</span><br><span class="line">                res = num2 / num1;//注意顺序</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //增加返回栈顶值的方法</span><br><span class="line">    public int peek() &#123;</span><br><span class="line">        return stack[top];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4：波兰表达式：前缀表达式"><a href="#4：波兰表达式：前缀表达式" class="headerlink" title="4：波兰表达式：前缀表达式"></a>4：波兰表达式：前缀表达式</h3><p>1：举例：     - * + 3 4 5 8</p>
<p>2：计算步骤，从右至左扫描，将8 5 4 3 压入栈</p>
<p>3：遇到+运算符，因此弹出3 和 4 进行运算，计算出3+4的值7，然后入栈</p>
<p>4：遇到*运算符，弹出7和5 计算得出得出7X5=35，将35入栈</p>
<p>5：最后-运算符，计算出35-8的值，即27，由此得到最终结果</p>
<h3 id="5：逆波兰表达式：后缀表达式"><a href="#5：逆波兰表达式：后缀表达式" class="headerlink" title="5：逆波兰表达式：后缀表达式"></a>5：逆波兰表达式：后缀表达式</h3><p>1：举例：    3 4 + 5 * 6 -</p>
<p>2：计算步骤，从左至右扫描，将3和4压入栈</p>
<p>3：遇到+运算符，因此弹出4和3 ，计算出3+4的值，得7，将7入栈</p>
<p>5：将5入栈</p>
<p>6：接下来是X运算符，因此弹出5和7，计算出7*5=35，将35入栈</p>
<p>7：将6入栈</p>
<p>8：弹出6（栈顶）和35（栈顶下一个元素），计算35-6，即29</p>
<p>9：逆波兰表达式计算器的代码实现</p>
<p>​    1：需要输入一个逆波兰表达式</p>
<p>​    2：使用系统提供的栈(stack)</p>
<p>​    3：支持小括号和多位整数</p>
<p>​    4：思路如上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">package com.it.stack;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Stack;</span><br><span class="line"></span><br><span class="line">public class PolandNotation &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //定义一个逆波兰表达式</span><br><span class="line">        //(3+4)*5-6 =&gt; 3 4 + 5 * 6 -</span><br><span class="line">        //为了方便，逆波兰表达式的数字和符号用空格隔开</span><br><span class="line">        String suffixExpression = &quot;30 4 + 5 * 6 -&quot;;</span><br><span class="line">        //思路</span><br><span class="line">        //1：先将&quot;3 4 + 5 * 6 -&quot;放入ArrayList中，这里是为了方便根据索引扫描</span><br><span class="line">        //2：将ArrayList传递给一个方法，遍历ArrayList，配合栈，完成计算</span><br><span class="line">        List&lt;String&gt; list = getListString(suffixExpression);</span><br><span class="line">        System.out.println(&quot;list=&quot; + list);</span><br><span class="line">        int res = calculate(list);</span><br><span class="line">        System.out.println(&quot;计算的结果是=&quot; + res);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static List&lt;String&gt; getListString(String suffixExpression) &#123;</span><br><span class="line">        String[] split = suffixExpression.split(&quot; &quot;);</span><br><span class="line">        List&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">        for (String s : split) &#123;</span><br><span class="line">            //遍历添加元素到集合</span><br><span class="line">            list.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //运算</span><br><span class="line">    public static int calculate(List&lt;String&gt; ls) &#123;</span><br><span class="line">        //创建栈</span><br><span class="line">        Stack&lt;String&gt; stack = new Stack&lt;&gt;();</span><br><span class="line">        for (String item : ls) &#123;</span><br><span class="line">            //使用正则表达式取出数,匹配的是多位数</span><br><span class="line">            if (item.matches(&quot;\\d+&quot;)) &#123;</span><br><span class="line">                //入栈</span><br><span class="line">                stack.push(item);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                int pop2 = Integer.parseInt(stack.pop());</span><br><span class="line">                int pop1 = Integer.parseInt(stack.pop());</span><br><span class="line">                int res = 0;</span><br><span class="line">                if (item.equals(&quot;+&quot;)) &#123;</span><br><span class="line">                    res = pop1 + pop2;</span><br><span class="line">                &#125; else if (item.equals(&quot;-&quot;)) &#123;</span><br><span class="line">                    res = pop1 - pop2;//先弹出的是pop2</span><br><span class="line">                &#125; else if (item.equals(&quot;*&quot;)) &#123;</span><br><span class="line">                    res = pop1 * pop2;</span><br><span class="line">                &#125; else if (item.equals(&quot;/&quot;)) &#123;</span><br><span class="line">                    res = pop1 / pop2;//先弹出的是pop2</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    throw new RuntimeException(&quot;运算符有误！&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                stack.push(&quot;&quot; + res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //最后留在栈中的就是运算结果</span><br><span class="line">        return Integer.parseInt(stack.pop());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="六：中缀表达式转换为后缀表达式"><a href="#六：中缀表达式转换为后缀表达式" class="headerlink" title="六：中缀表达式转换为后缀表达式"></a>六：中缀表达式转换为后缀表达式</h3><p>1：中缀表达式适合人的理解</p>
<p>2：后缀表达式适合计算机的运行</p>
<p>3：思路</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.初始化两个栈：运算符栈s1和储存中间结果的栈s2；</span><br><span class="line">2.从左至右扫描中缀表达式；</span><br><span class="line">3.遇到操作数时，将其压s2；</span><br><span class="line">4.遇到运算符时，比较其与s1栈顶运算符的优先级：</span><br><span class="line">　（1）如果s1为空，或栈顶运算符为左括号“(”，则直接将此运算符入栈；</span><br><span class="line">　（2）否则，若优先级比栈顶运算符的高，也将运算符压入s1；</span><br><span class="line">　（3）否则，将s1栈顶的运算符弹出并压入到s2中，再次转到(4.1)与s1中新的栈顶运算符相比较； </span><br><span class="line">5.遇到括号时：　</span><br><span class="line">（1）如果是左括号&quot;(&quot;，则直接压入s1　</span><br><span class="line">（2）如果是右括号&quot;)&quot;，则依次弹出s1栈顶的运算符，并压入s2，直到遇到左括号为止，此时将这一对括号丢弃</span><br><span class="line">6.重复步骤2至5，直到表达式的最右边</span><br><span class="line">7.将s1中剩余的运算符依次弹出并压入s2</span><br><span class="line">8.依次弹出s2中的元素并输出，结果的逆序即为中缀表达式对应的后缀表达式</span><br></pre></td></tr></table></figure>

<p>4：算法的层面</p>
<p>​    理解算法→灵活运用算法→自己设计算法</p>
<p>5：代码实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">package com.it.stack;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Stack;</span><br><span class="line"></span><br><span class="line">public class PolandNotation &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //定义一个逆波兰表达式</span><br><span class="line">        //(3+4)*5-6 =&gt; 3 4 + 5 * 6 -</span><br><span class="line">        //为了方便，逆波兰表达式的数字和符号用空格隔开</span><br><span class="line">/*        String suffixExpression = &quot;30 4 + 5 * 6 -&quot;;</span><br><span class="line">        //思路</span><br><span class="line">        //1：先将&quot;3 4 + 5 * 6 -&quot;放入ArrayList中，这里是为了方便根据索引扫描</span><br><span class="line">        //2：将ArrayList传递给一个方法，遍历ArrayList，配合栈，完成计算</span><br><span class="line">        List&lt;String&gt; list = getListString(suffixExpression);</span><br><span class="line">        System.out.println(&quot;list=&quot; + list);</span><br><span class="line">        int res = calculate(list);</span><br><span class="line">        System.out.println(&quot;计算的结果是=&quot; + res);*/</span><br><span class="line"></span><br><span class="line">        //测试中缀表达式转换成list</span><br><span class="line">        String expression = &quot;1+((2+3)*4)-5&quot;;</span><br><span class="line">        List&lt;String&gt; infixExpressionList = toInfixExpressionList(expression);</span><br><span class="line">        System.out.println(&quot;中缀表达式\n&quot; + expression);</span><br><span class="line">        System.out.println(&quot;中缀表达式对应的list\n&quot; + infixExpressionList);</span><br><span class="line">        //将中缀表达式得到的list转换为逆波兰表达式的字符串</span><br><span class="line">        List&lt;String&gt; suffixExpressionList = parseSuffixExpressionList(infixExpressionList);</span><br><span class="line">        System.out.println(&quot;后缀表达式对应的list\n&quot; + suffixExpressionList);</span><br><span class="line">        //验算逆序表达式的结果</span><br><span class="line">        System.out.printf(&quot;expression=%d&quot;, calculate(suffixExpressionList));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static List&lt;String&gt; getListString(String suffixExpression) &#123;</span><br><span class="line">        String[] split = suffixExpression.split(&quot; &quot;);</span><br><span class="line">        List&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br><span class="line">        for (String s : split) &#123;</span><br><span class="line">            //遍历添加元素到集合</span><br><span class="line">            list.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //运算</span><br><span class="line">    public static int calculate(List&lt;String&gt; ls) &#123;</span><br><span class="line">        //创建栈</span><br><span class="line">        Stack&lt;String&gt; stack = new Stack&lt;&gt;();</span><br><span class="line">        for (String item : ls) &#123;</span><br><span class="line">            //使用正则表达式取出数,匹配的是多位数</span><br><span class="line">            if (item.matches(&quot;\\d+&quot;)) &#123;</span><br><span class="line">                //入栈</span><br><span class="line">                stack.push(item);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                int pop2 = Integer.parseInt(stack.pop());</span><br><span class="line">                int pop1 = Integer.parseInt(stack.pop());</span><br><span class="line">                int res = 0;</span><br><span class="line">                if (item.equals(&quot;+&quot;)) &#123;</span><br><span class="line">                    res = pop1 + pop2;</span><br><span class="line">                &#125; else if (item.equals(&quot;-&quot;)) &#123;</span><br><span class="line">                    res = pop1 - pop2;//先弹出的是pop2</span><br><span class="line">                &#125; else if (item.equals(&quot;*&quot;)) &#123;</span><br><span class="line">                    res = pop1 * pop2;</span><br><span class="line">                &#125; else if (item.equals(&quot;/&quot;)) &#123;</span><br><span class="line">                    res = pop1 / pop2;//先弹出的是pop2</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    throw new RuntimeException(&quot;运算符有误！&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                stack.push(&quot;&quot; + res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //最后留在栈中的就是运算结果</span><br><span class="line">        return Integer.parseInt(stack.pop());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //将中缀表达式转出对应的list</span><br><span class="line">    public static List&lt;String&gt; toInfixExpressionList(String s) &#123;</span><br><span class="line">        //定义一个list，存放中缀表达式的内容</span><br><span class="line">        List&lt;String&gt; ls = new ArrayList&lt;String&gt;();</span><br><span class="line">        int i = 0;//指针，用于遍历s</span><br><span class="line">        String str;//对多位数的拼接工作</span><br><span class="line">        char c;//每遍历一个字符，放在char中</span><br><span class="line">        do &#123;</span><br><span class="line">            //如果c是一个非数字，直接加入到ls</span><br><span class="line">            if ((c = s.charAt(i)) &lt; 48 || (c = s.charAt(i)) &gt; 57) &#123;</span><br><span class="line">                ls.add(&quot;&quot; + c);</span><br><span class="line">                i++;//i 需要后移</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                //如果是一个数，需要考虑多位数问题</span><br><span class="line">                str = &quot;&quot;;//先将str置空</span><br><span class="line">                //‘0’ 【48】 ‘9’【57】</span><br><span class="line">                while (i &lt; s.length() &amp;&amp; (c = s.charAt(i)) &gt;= 48 &amp;&amp; (c = s.charAt(i)) &lt;= 57) &#123;</span><br><span class="line">                    str += c;//拼接</span><br><span class="line">                    i++;</span><br><span class="line">                    //while循环结束之后多位数就拼接完成</span><br><span class="line">                &#125;</span><br><span class="line">                ls.add(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        while (i &lt; s.length());</span><br><span class="line">        return ls;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //将得到的中缀表达式转换成为的list=&gt;后缀表达式对应的list</span><br><span class="line">    public static List&lt;String&gt; parseSuffixExpressionList(List&lt;String&gt; ls) &#123;</span><br><span class="line">        //定义两个栈</span><br><span class="line">        Stack&lt;String&gt; s1 = new Stack&lt;String&gt;();//定义符号栈</span><br><span class="line">        //说明：因为S2这个栈，在整个过程中没有pop操作，而且后面我们还需要逆序输出，因此直接用ArrayList操作</span><br><span class="line">        //Stack stack2=new Stack();</span><br><span class="line">        List&lt;String&gt; s2 = new ArrayList&lt;&gt;();//储存中间结果的list</span><br><span class="line">        for (String item : ls) &#123;</span><br><span class="line">            if (item.matches(&quot;\\d+&quot;)) &#123;</span><br><span class="line">                s2.add(item);</span><br><span class="line">            &#125; else if (item.equals(&quot;(&quot;)) &#123;</span><br><span class="line">                s1.push(item);</span><br><span class="line">            &#125; else if (item.equals(&quot;)&quot;)) &#123;</span><br><span class="line">                //（2）如果是右括号&quot;)&quot;</span><br><span class="line">                while (!s1.peek().equals(&quot;(&quot;)) &#123;</span><br><span class="line">//                    则依次弹出s1栈顶的运算符，并压入s2</span><br><span class="line">                    s2.add(s1.pop());</span><br><span class="line">                &#125;</span><br><span class="line">                //直到遇到左括号为止，此时将这一对括号丢弃</span><br><span class="line">                s1.pop();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                //当item的优先级小于或等于栈顶运算符的优先级，将s1栈顶的运算符弹出并压入到s2中，再次转到(4.1)与s1中新的栈顶运算符相比较；</span><br><span class="line">                //需要加入优先级高低的方法</span><br><span class="line">                while (s1.size() != 0 &amp;&amp; Operation.getValue(s1.peek()) &gt;= Operation.getValue(item)) &#123;</span><br><span class="line">                    s2.add(s1.pop());</span><br><span class="line">                &#125;</span><br><span class="line">                s1.push(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //for循环完成之后，将item压入栈中</span><br><span class="line">        while (s1.size() != 0) &#123;</span><br><span class="line">            s2.add(s1.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        return s2;//因为是存放到list中，按照顺序输出就是后缀表达式对应的list</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//编写一个类，可以返回一个运算符对应的优先级</span><br><span class="line">class Operation &#123;</span><br><span class="line">    private static int ADD = 1;</span><br><span class="line">    private static int SUB = 1;</span><br><span class="line">    private static int MUL = 2;</span><br><span class="line">    private static int DIV = 2;</span><br><span class="line"></span><br><span class="line">    public static int getValue(String operation) &#123;</span><br><span class="line">        int result = 0;</span><br><span class="line">        switch (operation) &#123;</span><br><span class="line">            case &quot;+&quot;:</span><br><span class="line">                result = ADD;</span><br><span class="line">                break;</span><br><span class="line">            case &quot;-&quot;:</span><br><span class="line">                result = SUB;</span><br><span class="line">                break;</span><br><span class="line">            case &quot;*&quot;:</span><br><span class="line">                result = MUL;</span><br><span class="line">                break;</span><br><span class="line">            case &quot;/&quot;:</span><br><span class="line">                result = DIV;</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">//                System.out.println(&quot;不存在操作符&quot;);</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
    </div>
    
    
    

	<div>
  
    ﻿<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
  
</div>

    

		

    

    


	
    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/28/java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%EF%BC%881%EF%BC%89%E6%95%B0%E7%BB%84%EF%BC%8C%E9%98%9F%E5%88%97%EF%BC%8C%E9%93%BE%E8%A1%A8/" rel="next" title="java数据结构和算法(1）数组，队列，链表">
                <i class="fa fa-chevron-left"></i> java数据结构和算法(1）数组，队列，链表
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/05/java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%EF%BC%883%EF%BC%89%E9%80%92%E5%BD%92/" rel="prev" title="java数据结构和算法（3）递归">
                java数据结构和算法（3）递归 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">鄢玉兵</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一：栈"><span class="nav-number">1.</span> <span class="nav-text">一：栈</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1：栈的应用场景"><span class="nav-number">1.0.1.</span> <span class="nav-text">1：栈的应用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2：用数组模拟栈，代码实现出栈与入栈思路"><span class="nav-number">1.0.2.</span> <span class="nav-text">2：用数组模拟栈，代码实现出栈与入栈思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3：栈实现综合计算器：中缀表达式"><span class="nav-number">1.0.3.</span> <span class="nav-text">3：栈实现综合计算器：中缀表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4：波兰表达式：前缀表达式"><span class="nav-number">1.0.4.</span> <span class="nav-text">4：波兰表达式：前缀表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5：逆波兰表达式：后缀表达式"><span class="nav-number">1.0.5.</span> <span class="nav-text">5：逆波兰表达式：后缀表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六：中缀表达式转换为后缀表达式"><span class="nav-number">1.0.6.</span> <span class="nav-text">六：中缀表达式转换为后缀表达式</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">鄢玉兵</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
